---
# yaml-language-server: $schema=https://kubernetesjsonschema.dev/v1.18.1-standalone-strict/pod-v1.json
apiVersion: v1
kind: Pod
metadata:
  annotations:
    configmap.reloader.stakater.com/reload: vpn-gateway-pod-gateway,vpn-gateway-pod-gateway-addon-vpn
    secret.reloader.stakater.com/reload: vpn-gateway-secret
  labels:
    app.kubernetes.io/instance: vpn-gateway
    app.kubernetes.io/name: pod-gateway
  name: gluetun-test-pod
spec:
  automountServiceAccountToken: false
  containers:
  - env:
    - name: DOT
      value: "off"
    - name: FIREWALL
      value: "off"
    - name: LOG_LEVEL
      value: debug
    - name: VPN_SERVICE_PROVIDER
      value: privado
    - name: VPN_TYPE
      value: openvpn
    - name: OPENVPN_PROTOCOL
      value: udp
    - name: SERVER_COUNTRIES
      value: Netherlands
    - name: HEALTH_VPN_DURATION_INITIAL
      value: 30s
    - name: OPENVPN_VERBOSITY
      value: "6"
    envFrom:
    - secretRef:
        name: vpn-gateway-secret
    image: ghcr.io/qdm12/gluetun:latest
    imagePullPolicy: Always
    name: gluetun
    resources:
      limits:
        cpu: 5m
        memory: 128M
      requests:
        cpu: 5m
        memory: 64M
    securityContext:
      capabilities:
        add:
        - NET_ADMIN
    volumeMounts:
    - mountPath: /tmp/gluetun
      name: gluetun-data
  dnsPolicy: ClusterFirst
  restartPolicy: Always
  securityContext:
    fsGroup: 568
    fsGroupChangePolicy: OnRootMismatch
  volumes:
  - emptyDir: {}
    name: gluetun-data

