---
machine:
  sysctls:
    fs.inotify.max_user_watches: 1048576       # Watchdog
    fs.inotify.max_user_instances: 8192        # Watchdog
    fs.file-max: 500000                        # SMB
    net.core.default_qdisc: fq                 # 10Gb/s
    net.core.rmem_max: 67108864                # 10Gb/s | Cloudflared / QUIC
    net.core.wmem_max: 67108864                # 10Gb/s | Cloudflared / QUIC
    net.ipv4.tcp_congestion_control: bbr       # 10Gb/s
    net.ipv4.tcp_fastopen: 3                   # Send and accept data in the opening SYN packet
    net.ipv4.tcp_mtu_probing: 1                # 10Gb/s | Jumbo frames
    net.ipv4.tcp_rmem: 4096 87380 33554432     # 10Gb/s
    net.ipv4.tcp_wmem: 4096 65536 33554432     # 10Gb/s
    net.ipv4.tcp_window_scaling: 1             # 10Gb/s
    user.max_user_namespaces: 11255            # User Namespaces
    vm.nr_hugepages: 1024                      # PostgreSQL
    net.core.bpf_jit_harden: 1                 # nvidia
    net.ipv4.neigh.default.gc_thresh1: "4096"  # Prevent ARP cache overflows
    net.ipv4.neigh.default.gc_thresh2: "8192"  # Prevent ARP cache overflows
    net.ipv4.neigh.default.gc_thresh3: "16384" # Prevent ARP cache overflows
